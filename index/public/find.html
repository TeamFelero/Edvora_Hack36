<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Leapp for Colleges</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://www.paypal.com/sdk/js?client-id=sb&currency=USD"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.1/gsap.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>

<body class="m-0 font-sans bg-gradient-to-r from-[#121212] to-[#1e1e1e] text-white">

    <!-- Navbar -->
    <nav class="bg-[#c0c0c0]/40 backdrop-blur-md shadow-md rounded-3xl max-w-[85%] mt-5 mx-auto px-4 mb-3">
        <div class="max-w-7xl mx-auto py-4 flex items-center justify-between">
            <!-- Logo -->
            <div class="flex items-center space-x-2 text-2xl font-bold text-white">
                <img src="./assets/logo2.png" alt="Logo" class="h-14">
                <div>Edvora</div>
            </div>

            <!-- Desktop Menu -->
            <div class="hidden md:flex space-x-6 items-center">
                <a href="#" class="nav-link">Home</a>
                <a href="#" class="nav-link">About</a>
                <a href="#" class="nav-link">Services</a>
                <a href="#" class="nav-link">Login</a>
                <a href="#" class="nav-link">Find</a>
            </div>

            <!-- Hamburger -->
            <div class="md:hidden">
                <button id="menu-toggle">
                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" stroke-width="2"
                        viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </button>
            </div>
        </div>

        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden px-4 pb-4 flex flex-col space-y-2">
            <a href="#" class="nav-link">Home</a>
            <a href="#" class="nav-link">About</a>
            <a href="#" class="nav-link">Services</a>
            <a href="#" class="nav-link">Login</a>
            <a href="#" class="nav-link">Find</a>
        </div>
    </nav>

    <!-- Page Content -->
    <div class="flex flex-col md:flex-row min-h-screen">
        <!-- Sidebar -->
        <aside class="w-full md:w-[400px] p-8 md:p-12 bg-black">
            <h1 class="text-xl text-white mb-4">EDVORA</h1>
            <h2 class="text-4xl text-gray-300 leading-snug">
                Home Page<br>For <span class="text-gray-400">Leapp for</span><br>
                <strong class="text-white font-bold">Colleges</strong>
            </h2>
            <p class="text-gray-400 mt-4 mb-8">
                We’re your wheelhouse for Colleges for save, lead youth...
            </p>
            <button
                class="bg-pink-500 text-white px-6 py-3 rounded-lg font-bold transition-transform duration-300 hover:scale-105">
                Search Program
            </button>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 bg-gray-100 text-gray-800 p-8 rounded-t-[30px] md:rounded-l-[30px] w-full">
            <!-- Top Nav -->
            <header class="flex flex-wrap justify-between gap-4 mb-8">
                <nav class="flex flex-wrap space-x-4 justify-start items-center w-full gap-4">
                    <a href="#" class="text-pink-500 font-medium" data-section="Colleges">Colleges</a>
                    <a href="#" class="text-gray-600 font-medium" data-section="News">News</a>
                    <a href="#" class="text-gray-600 font-medium" data-section="Reviews">Reviews</a>
                    <a href="#" class="text-gray-600 font-medium" data-section="Chat">Chat</a>
                    <a href="#"
                        class="text-gray-600 font-medium px-6 py-3 rounded-full bg-gradient-to-r from-yellow-400 via-pink-500 to-red-500 text-white font-bold text-lg shadow-xl hover:scale-105 hover:shadow-2xl transition-transform duration-300 backdrop-blur-lg border border-white/20"
                        data-section="GetPremium">✨ Get Premium</a>
                </nav>
            </header>


            <!-- colleges -->

            <div id="city-search-wrapper">
                <section class="mb-8" id="search-section">
                  <div class="relative w-full">
                    <input id="cityInput" type="text" placeholder="Enter city name..."
                      class="w-full py-3 pl-4 pr-12 rounded-xl border-none focus:ring-2 focus:ring-pink-400 focus:outline-none text-gray-800" />
                    <button onclick="fetchColleges()"
                      class="absolute top-1/2 right-3 transform -translate-y-1/2 bg-pink-500 hover:bg-pink-600 p-2 rounded-full transition duration-300">
                      <img src="./assets/search.png" alt="Search" class="h-5 w-5" />
                    </button>
                  </div>
                </section>
        
                <section class="mb-8" id="result"></section>
        
                <section class="h-[500px] w-full rounded-2xl overflow-hidden mb-8" id="map-section">
                  <div id="map" class="w-full h-full"></div>
                </section>
              </div>
        

            <!-- news -->
            <section class="p-6 bg-gray-100 text-gray-800 hidden" id="news-section">
                <div class="max-w-6xl mx-auto">
                    <h2 class="text-2xl font-bold mb-6">Latest News & Articles</h2>
                    <div id="news-container" class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                        <!-- News Card -->
                        <div  class="flex flex-col bg-white p-4 rounded-lg shadow-md hover:shadow-lg transition-shadow">
                            <h1 class="text-3xl font-bold text-center text-pink-800 mb-6">Latest College News</h1>
                            <div id="news-container" class="space-y-4">Loading news...</div>
                        </div>

                    </div>

                </div>
            </section>


            <!-- reviews -->
            <section id="Review" class="p-6 bg-gray-100 text-gray-800 hidden">
                <div class="px-4 py-10 bg-gray-50">
                    <h2 class="text-2xl font-bold mb-6 text-center">Student Reviews</h2>

                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Review Card -->
                        <div class="bg-white rounded-xl shadow-md p-4 flex flex-col items-center text-center">
                            <!-- Image -->
                            <img src="https://via.placeholder.com/100" alt="User Photo"
                                class="w-24 h-24 rounded-full object-cover mb-4">

                            <!-- Username -->
                            <h3 class="text-lg font-semibold text-gray-800">Ananya Sharma</h3>

                            <!-- Institute -->
                            <p class="text-sm text-gray-500">IIT Delhi</p>

                            <!-- Subject -->
                            <p class="text-sm text-gray-600 mt-1">Subject: Mathematics</p>

                            <!-- Rating -->
                            <div class="flex justify-center mt-3">
                                <span class="text-yellow-400 text-lg">&#9733;&#9733;&#9733;&#9733;&#9734;</span>
                                <!-- 4/5 stars -->
                            </div>
                        </div>

                        <!-- Repeat cards -->
                        <div class="bg-white rounded-xl shadow-md p-4 flex flex-col items-center text-center">
                            <img src="https://via.placeholder.com/100" alt="User Photo"
                                class="w-24 h-24 rounded-full object-cover mb-4">
                            <h3 class="text-lg font-semibold text-gray-800">Rohan Mehta</h3>
                            <p class="text-sm text-gray-500">BITS Pilani</p>
                            <p class="text-sm text-gray-600 mt-1">Subject: Physics</p>
                            <div class="flex justify-center mt-3">
                                <span class="text-yellow-400 text-lg">&#9733;&#9733;&#9733;&#9733;&#9733;</span>
                            </div>
                        </div>

                        <!-- Another card -->
                        <div class="bg-white rounded-xl shadow-md p-4 flex flex-col items-center text-center">
                            <img src="https://via.placeholder.com/100" alt="User Photo"
                                class="w-24 h-24 rounded-full object-cover mb-4">
                            <h3 class="text-lg font-semibold text-gray-800">Priya Verma</h3>
                            <p class="text-sm text-gray-500">MNNIT Allahabad</p>
                            <p class="text-sm text-gray-600 mt-1">Subject: Chemistry</p>
                            <div class="flex justify-center mt-3">
                                <span class="text-yellow-400 text-lg">&#9733;&#9733;&#9733;&#9734;&#9734;</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>


            <!-- GetPremium -->
            <section id="GetPremium" class="p-6 bg-gray-100 text-gray-800 hidden">
                <div
                    class="min-h-screen bg-gray-900 text-white flex flex-col items-center justify-center px-4 py-8 rounded-3xl">
                    <h1 class="text-3xl md:text-4xl font-bold mb-2">College Finder Premium</h1>
                    <p class="text-lg md:text-xl text-gray-300">Pay Rs. 499/- to unlock advanced college matching
                        features!</p>

                    <div id="paypal-button-container" class="mt-8"></div>
                </div>
            </section>

            <!-- chat -->

            <section id="Chat" class="p-6 bg-gray-100 text-gray-800 hidden">
                <div id="chat-container" class="max-w-3xl mx-auto mt-12 bg-white p-6 rounded-lg shadow-lg">
                    <ul id="messages" class="list-none p-0 max-h-72 overflow-y-auto mb-5 space-y-2">
                        <!-- Messages will go here -->
                    </ul>
                    <form id="form" autocomplete="off" class="flex">
                        <input id="input" type="text" placeholder="Type your message..."
                            class="flex-1 p-3 border border-gray-300 rounded-lg" aria-label="Type your message" />
                        <button
                            class="ml-3 px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none transition duration-200">
                            Send
                        </button>
                    </form>
                </div>
            </section>

    </div>






    </main>
    </div>

    <script>
        const tabs = document.querySelectorAll('header nav a');
        const sections = {
            Colleges: document.querySelector('main > div'),
            News: document.querySelector('section.bg-gray-100'),
            Reviews: document.getElementById('Review'),
            GetPremium: document.getElementById('GetPremium'),
            Chat: document.getElementById('Chat'),
        };

        tabs.forEach(tab => {
            tab.addEventListener('click', (e) => {
                e.preventDefault();

                // Remove highlight from all
                tabs.forEach(t => t.classList.remove('text-pink-500'));
                tab.classList.add('text-pink-500');

                // Hide all sections
                Object.values(sections).forEach(section => {
                    if (section) section.classList.add('hidden');
                });

                const selected = tab.dataset.section;
                if (sections[selected]) {
                    sections[selected].classList.remove('hidden');
                }
            });
        });

    </script>

    <script>
        const menuBtn = document.getElementById('menu-toggle');
        const mobileMenu = document.getElementById('mobile-menu');

        menuBtn.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });
    </script>

    <script>
        paypal.Buttons({
            createOrder: function (data, actions) {
                return actions.order.create({
                    purchase_units: [{
                        amount: {
                            value: '6'  // Amount in USD
                        }
                    }]
                });
            },
            onApprove: function (data, actions) {
                return actions.order.capture().then(function (details) {
                    alert('✅ Payment completed by ' + details.payer.name.given_name);
                    // You can redirect or show a success screen here
                });
            }
        }).render('#paypal-button-container');
    </script>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        const form = document.getElementById('form');
        const input = document.getElementById('input');
        const messages = document.getElementById('messages');

        let username = prompt('Enter your username:') || 'Anonymous';
        socket.emit('set username', username);

        form.addEventListener('submit', (e) => {
            e.preventDefault();
            if (input.value) {
                socket.emit('chat message', input.value);
                input.value = '';
            }
        });

        socket.on('chat message', (msg) => {
            const item = document.createElement('li');
            item.textContent = `${msg.username}: ${msg.text}`;
            messages.appendChild(item);
            messages.scrollTop = messages.scrollHeight;
        });
    </script>
    
       <script>
        let map;
        let markers = [];
    
        const collegeContacts = {
          "Indian Institute of Technology Bombay": "022-2572-2545",
          "University of Mumbai": "022-2654-3000",
          "St. Xavier's College": "022-2262-0661",
          "Delhi University": "011-2766-7857"
        };
    
        function focusOnCollege(lat, lon, name) {
          if (map) {
            map.setView([lat, lon], 15);
            markers.forEach(marker => {
              const markerLatLng = marker.getLatLng();
              if (markerLatLng.lat === lat && markerLatLng.lng === lon) {
                marker.openPopup();
              }
            });
          }
        }
    
        async function fetchColleges() {
          const city = document.getElementById('cityInput').value.trim();
          const resultDiv = document.getElementById('result');
          resultDiv.innerHTML = "Loading...";
    
          const apiKey = '0167fbbf5d454439a3071d713072809e';
    
          try {
            const geoRes = await fetch(`https://api.geoapify.com/v1/geocode/search?text=${city}&apiKey=${apiKey}`);
            const geoData = await geoRes.json();
    
            if (!geoData.features || geoData.features.length === 0) {
              resultDiv.innerHTML = "City not found.";
              return;
            }
    
            const { lon, lat } = geoData.features[0].properties;
    
            const response = await fetch(`https://api.geoapify.com/v2/places?categories=education.university&filter=circle:${lon},${lat},50000&limit=20&apiKey=${apiKey}`);
            const data = await response.json();
    
            if (!data.features || data.features.length === 0) {
              resultDiv.innerHTML = "No colleges found.";
              return;
            }
    
            if (map) {
              map.remove();
            }
    
            map = L.map('map').setView([lat, lon], 12);
            L.tileLayer(`https://tile.openstreetmap.org/{z}/{x}/{y}.png`, {
              attribution: '&copy; OpenStreetMap contributors'
            }).addTo(map);
    
            markers = [];
            resultDiv.innerHTML = `<h3 class="text-xl font-bold mb-4">Colleges near ${city}:</h3>`;
    
            data.features.forEach(college => {
              const props = college.properties;
              const coords = college.geometry.coordinates;
              const name = props.name || "N/A";
              const phone = collegeContacts[name] || "Not available";
    
              resultDiv.innerHTML += `
                <div class="bg-white p-4 rounded-xl shadow text-sm text-gray-900">
                  <strong>Name:</strong> ${name}<br>
                  <strong>Address:</strong> ${props.address_line1 || 'N/A'}, ${props.address_line2 || ''}<br>
                  <strong>Website:</strong> ${props.website ? `<a href="${props.website}" target="_blank" class="text-blue-600 hover:underline">${props.website}</a>` : 'N/A'}<br>
                  <strong>Contact Number:</strong> ${phone}<br>
                  <strong>Type:</strong> ${props.categories ? props.categories.join(', ') : 'N/A'}<br>
                  <button onclick="focusOnCollege(${coords[1]}, ${coords[0]}, \`${name}\`)" class="mt-2 inline-block px-4 py-2 bg-pink-500 text-white rounded hover:bg-pink-600">Show on Map</button>
                </div>
              `;
    
              const marker = L.marker([coords[1], coords[0]])
                .addTo(map)
                .bindPopup(`<b>${name}</b><br>${props.address_line1 || ''}`);
              markers.push(marker);
            });
          } catch (error) {
            console.error(error);
            resultDiv.innerHTML = "An error occurred while fetching data.";
          }
        }
    
        function fetchCollegeNews() {
          const apiKey = "pub_81559ded11d25191d0aa202882e07a95f57c8";
          const endpoint = `https://newsdata.io/api/1/news?apikey=${apiKey}&q=college&language=en`;
    
          fetch(endpoint)
            .then(response => response.json())
            .then(data => {
              const container = document.getElementById("news-container");
              container.innerHTML = "";
    
              if (data.results && data.results.length > 0) {
                data.results.forEach(article => {
                  const newsCard = document.createElement("div");
                  newsCard.className = "news-card bg-gray-100 p-4 rounded shadow";
    
                  newsCard.innerHTML = `
                    <h2 class="text-lg font-bold"><a href="${article.link}" target="_blank">${article.title}</a></h2>
                    <p>${article.description || "No description available."}</p>
                    <small><strong>Source:</strong> ${article.source_id || "Unknown"}</small>
                  `;
                  container.appendChild(newsCard);
                });
              } else {
                container.innerHTML = "No news found.";
              }
            })
            .catch(error => {
              document.getElementById("news-container").innerHTML = "Failed to load news.";
              console.error("Error fetching news:", error);
            });
        }
    
        document.getElementById("news-link").addEventListener("click", (e) => {
          e.preventDefault();
          document.getElementById("city-search-wrapper").style.display = "none";
          document.getElementById("news-section").classList.remove("hidden");
          document.getElementById("news-section").scrollIntoView({ behavior: "smooth" });
          if (document.getElementById("news-container").innerHTML.trim() === "") {
            fetchCollegeNews();
          }
        });
    
        document.getElementById("colleges-link").addEventListener("click", (e) => {
          e.preventDefault();
          document.getElementById("city-search-wrapper").style.display = "block";
          document.getElementById("news-section").classList.add("hidden");
          document.getElementById("search-section").scrollIntoView({ behavior: "smooth" });
        });
    
        document.getElementById("menu-toggle").addEventListener("click", () => {
          const menu = document.getElementById("mobile-menu");
          menu.classList.toggle("hidden");
        });
        </script>

    <script src="../animation.js"></script>

   
</body>

</html>